=========== INSTALLATION ==============
1- http://www.net-snmp.org/Download dan source kodu indir. Indirilen source kodu Install doc u takip ederek derle. Perl yoksa sudo apt-get install libperl-dev ile kurabilirsin.

2- snmpd servicini kurmak icin asagidaki linkdeki adimlari takip et.
https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-an-snmp-daemon-and-client-on-ubuntu-18-04 

net-snmp-config --default-mibdirs    ile olusturulacak mib in directory sini gorebiliriz
snmptranslate -mALL -Tp -IR cabinetEnvironment ile mib dosyalarinda dolasabiliriz

env MIBS="kgm-ortak" mib2c -c mib2c.scalar.conf cabinetEnvironment 		ile verilen mib'in sclar variablelarini set ve get edecek kodu uretir
env MIBS="kgm-ortak" mib2c -c mib2c.mfd.conf cabinetEnvironment			ile verilen mib'in table variablelarini set ve get edecek kodu uretir
env MIBS="kgm-ortak" mib2c -c mfd-makefile.m2m cabinetEnvironment
env MIBS="kgm-ortak" mib2c -c subagent.m2c cabinetEnvironment

###########
Proje cmake ile derlenmektedir, CMake kurulumu icin:
	sudo apt install -y cmake


Asagidaki islemi yapmadan once /etc/snmp/snmpd.conf icerisindeki -V systemonly kismini sil. Burayi silerek tum SNMP bilgilerine erisimin 
onunu acacaktir. Ayrica rocommunity rwcommunity yap. Son olarak agentAddress udp:127.0.0.1:161 satirini yoruma al ve altina su satiri ekle:
	agentAddress udp:161,udp6:[::1]:161

Derledikten sonra calistirirken sudo ile calistir. Query eden kisimda da asagidaki gibi calistir:	
	sudo ./cabinetEnvironment -f -L
	
	snmpwalk -v 2c -c public -On 192.168.1.70 ISBAK-MIB::cabinetEnvironment
	snmpset -v 2c -c public -On localhost  ISBAK-MIB::cabinetEnvironment::freq_threshold i 10
	
	snmptable -v 2c -c public -Os 192.168.1.110 ISBAV-MIB::coord.trPatternTable
	
	kgm-ortak::coord.trPatternTable.patternEnabled
	snmpset -v 2c -c public -Os 192.168.1.176 .1.3.6.1.4.1.40019.4.2.1.9.2.1.3.2.2 i 1

###########
# wiringPi yi kur, sc16is'nin kutuphanesi icin:
	git clone https://github.com/WiringPi/WiringPi.git
	cd wiringPi
	git pull origin
	./build
	gpio -v
	
###########
# systemd librarysi kurulumu:
	sudo apt install libsystemd-dev

###########
#sc16is'nin raspberry uzerinde enable edilmesi:
raspberry pi uzerinde i2c yi ac
	sudo raspi-config 
	Choose Interfacing Options -> I2C ->yes 
	sudo reboot

sc16is de 115200 e ulasmak icin I2C yi 400kH e almak gerekiyo. Config dosyasina gir i2c li satiri asagidaki gibi degistir
	sudo nano /boot/config.txt
	dtparam=i2c_arm=on,i2c_arm_baudrate=400000

Ayrica en alta satira sc16is yi acmak icin su satiri ekle
	dtoverlay=sc16is750-i2c,int_pin=10,addr=0x4D
	sudo reboot

Acilinca ls /dev/ttyS* yaparak /dev/ttySC yi gor

###########
Autogenerated tabloyu olusturduktan sonra xxx_data_access.c deki xxx_init_data fonksiyonuna tablonun sutunlarini belirt. Sonra ayni dosyadaki xxx_container_load fonkda depolancak veya okunacak dosyayi belirt (defaut /etc/dummy.conf). Hemen altinda "parse line into variables" kisminda da okunan verileri parse et.

agentxTutorial_subagent.c de init_myTesttable() i cagir


###########
Cihaz Notlari:
	- CFUN goruldukten sonra, okuma yazma islemleri icin bir 15 saniye falan beklemek gerekiyor.
	- Karti ayik tutmak icin arada %RR#01300003E8F80080** mesaji gonderiyorlar
	- Gonderilen mesajdaki hex karakterler buyuk harf olmali


###############
ABORT "BUSY"
ABORT "NO CARRIER"
ABORT "NO DIALTONE"
ABORT "ERROR"
ABORT "NO ANSWER"
TIMEOUT 30
'' AT
OK ATE0
OK ATI;+CSUB;+CSQ;+COPS?;+CGREG?;&D2
OK AT+CGDCONT=2,"IP","ibb1","172.16.96.41",0,0
OK ATDT*99***2#
CONNECT ''

pi@pi:~/examples/AT $ sudo cat /etc/ppp/peers/quectel-ppp
/dev/ttyS0
115200
user "905411637529@t1"
password "isbakm1306b"
connect 'chat -s -v -f /etc/ppp/peers/quectel-chat-connect'
disconnect 'chat -s -v -f /etc/ppp/peers/quectel-chat-disconnect'
hide-password
noauth
debug
#defaultroute
noipdefault
noccp
persist
nocrtscts


######## TEST #######
Zyxel_9A71
4QTHD4BMQL

snmpset -v 2c -c public -Os 192.168.1.176 kgm-ortak::coord.trPatternTable.1.5.1.1 i 5 kgm-ortak::coord.trPatternTable.1.10.1.1 i 65535 kgm-ortak::coord.trPatternTable.1.11.1.1 i 10  kgm-ortak::coord.trPatternTable.1.3.1.1 i 1 kgm-ortak::coord.trPatternTable.1.6.1.1 s "345" kgm-ortak::coord.trPatternTable.1.12.1.1 s "aabbccddeeff" kgm-ortak::coord.trPatternTable.1.14.1.1 u 1673166404 kgm-ortak::coord.trPatternTable.1.15.1.1 u 1675844804

snmpbulkwalk -v 2c -c public -Os 192.168.1.176 kgm-ortak::coord.trPatternTable

for counter in {1..1000}; do snmpwalk -v 2c -c public -On 192.168.1.16 kgm-ortak::signalState.signalStateTable ; sleep 1; done | grep 2.1.12.0

# Day Plan Table
snmpbulkwalk -v 2c -c public -On 192.168.1.176 kgm-ortak::customTimeBase.customTimeBaseDayPlanTable.1.4.1.1
snmpset -v 2c -c public -Os 192.168.1.176 kgm-ortak::customTimeBase.customTimeBaseDayPlanTable.1.4.1.2.2 i 7 kgm-ortak::customTimeBase.customTimeBaseDayPlanTable.1.5.1.2.2 i 15 kgm-ortak::customTimeBase.customTimeBaseDayPlanTable.1.6.1.2.2 i 4 kgm-ortak::customTimeBase.customTimeBaseDayPlanTable.1.8.1.2.2 i 2

# Schedule Table
snmpbulkwalk -v 2c -c public -On 192.168.1.176 kgm-ortak::customTimeBase.customTimeBaseScheduleTable
snmpset -v 2c -c public -Os 192.168.1.176 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.5.1.1 i 6 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.6.1.1 i 20
snmpset -v 2c -c public -Os 192.168.1.176 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.3.1.2 i 6 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.4.1.2 i 21 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.5.1.2 i 12 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.6.1.2 i 31 kgm-ortak::customTimeBase.customTimeBaseScheduleTable.1.7.1.2 i 9

# Special Day Table
snmpbulkwalk -v 2c -c public -On 192.168.1.176 kgm-ortak::customTimeBase.customSpecialDayTable
snmpset -v 2c -c public -Os 192.168.1.176 kgm-ortak::customTimeBase.customSpecialDayTable.1.3.1.3 i 8 kgm-ortak::customTimeBase.customSpecialDayTable.1.4.1.3 i 30 kgm-ortak::customTimeBase.customSpecialDayTable.1.5.1.3 i 4


coursera machine-learning ucretsiz dersi andrew

####################################
cabinetenv	-- driver_module_status_table
channel		-- channel, error_flag_table	
signalState	-- signalState 
detector	-- detector(otherModules'lerin tanimlanmasi lazim), module_status_table (Yok)
user		-- user (Abdullah'a sor)


Yeni MIB farklari
	- Signal state tablosuna ekstra 1 parametre
	- trPatternTable read-only olanlar
	- coord ekstra parametre (+)
	- dedectorModuleStatus ==> detectorModuleStatus
	
	
####################################
ssh root@188.38.171.141
ssh root@188.38.4.242
A1b2c3d4.
ssh imx7Test@188.38.171.141
systemctl restart snmpd
journalctl -u haberlesmekarti --no-pager -o cat -n 10

snmpbulkwalk -v 2c -c public -On 188.38.61.249 kgm-ortak::driverModule
snmpbulkwalk -v 2c -c public -On 188.38.171.141 kgm-ortak::dedectorModule.dedectorModuleStatus
snmpbulkwalk -v 2c -c public -On 188.38.61.249 kgm-ortak::dedectorModule.otherModules

snmpbulkwalk -v 2c -c public -On 192.168.1.16 kgm-ortak::channel.ChannelGeneralFaultStateTable
snmpbulkwalk -v 2c -c public -On 188.38.61.249 kgm-ortak::channel.trafficLightFaultStatusTable
snmpbulkwalk -v 2c -c public -On 192.168.1.16 kgm-ortak::channel.channelErrorFlagsTable

snmpbulkwalk -v 2c -c public -On 192.168.1.16 kgm-ortak::signalState.maxSignalState
snmpbulkwalk -v 2c -c public -On 188.38.171.141 kgm-ortak::signalState.signalStateTable
snmpbulkwalk -v 2c -c public -On 192.168.1.16 kgm-ortak::signalState.signalPlanLastChangeTime
snmpbulkwalk -v 2c -c public -On 188.38.171.141 kgm-ortak::signalState.signalPlanLastChangeTimes

snmpbulkwalk -v 2c -c public -Os 188.38.171.141 kgm-ortak::coord.trPatternTable
snmpbulkwalk -v 2c -c public -Os 188.38.171.141 kgm-ortak::user.userOperationsTable

snmptrap -v 2c -c public 188.38.173.119 '' SNMPv2-MIB::coldStart SNMPv2-MIB::sysName.0 s "MyDevice"

snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::cabinetEnvironment.ascLineVolts


snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::cabinetEnvironment.cabinetEnvironDevicesTable
snmpbulkwalk -v 2c -c public -On 188.38.171.141 NTCIP1202-v03::phase.phaseStatusGroupTable
snmpbulkwalk -v 2c -c public -On 188.38.61.249 NTCIP1202-v03::detector.vehicleDetectorTable
snmpbulkwalk -v 2c -c public -On 188.38.171.141 NTCIP1202-v03::detector.vehicleDetectorStatusGroupTable
snmpbulkwalk -v 2c -c public -On 188.38.171.141  NTCIP1202-v03::detector.pedestrianDetectorTable
snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::detector.pedestrianDetectorStatusGroupTable


snmpset -v 2c -c public -Os 188.38.171.141 kgm-ortak::coord.trPatternTable.1.4.1.1 i 5 kgm-ortak::coord.trPatternTable.1.3.1.1 i 1 kgm-ortak::coord.trPatternTable.1.14.1.1 i 1692193348 kgm-ortak::coord.trPatternTable.1.15.1.1 i 1692293348 

snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::coord.coordCorrectionMode
snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::channel.channelStatusGroupTable

snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1201-v03::globalConfiguration.globalModuleTable
snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1201-v03::globalTimeManagement.globalTime
snmpset -v 2c -c public -Os 192.168.1.16 NTCIP1201-v03::globalTimeManagement.globalTime.0 i 1701575963

snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::detector.volumeOccupancyReport.volumeOccupancySequence
snmpbulkwalk -v 2c -c public -On 192.168.1.16 NTCIP1202-v03::detector.volumeOccupancyReport.volumeOccupancyPeriod
snmpset -v 2c -c public -Os 188.38.171.141 NTCIP1202-v03::detector.volumeOccupancyReport.volumeOccupancyPeriod.0 i 10

snmpbulkwalk -v 2c -c public -On 188.38.171.141 NTCIP1202-v03::detector.volumeOccupancyReport.activeVolumeOccupancyDetectors
snmpbulkwalk -v 2c -c public -On 188.38.61.249 NTCIP1202-v03::detector.volumeOccupancyReport.volumeOccupancyTable
snmpbulkwalk -v 2c -c public -On 188.38.171.141 NTCIP1202-v03::detector.volumeOccupancyReport.detectorSampleTime
snmpbulkwalk -v 2c -c public -On 188.38.171.141 NTCIP1202-v03::detector.volumeOccupancyReport.detectorSampleDuration













